graph TD
    A[CLI Entry Point] --> B[Command Parser<br/>clap]
    B --> C{Terminal<br/>Detection}
    
    C -->|Terminal| D[Progress Manager<br/>indicatif]
    C -->|Pipe| E[Silent Mode]
    
    D --> F[Multi-Progress<br/>Display]
    E --> F
    
    F --> G[Command Execution]
    
    G --> H[Streaming I/O<br/>Layer]
    H --> I[Progress Tracking]
    H --> J[Buffer Management]
    
    I --> K[File Operations]
    J --> K
    
    K --> L{Output<br/>Destination}
    L -->|stdout| M[Pipe Support]
    L -->|-o flag| N[File Output]
    
    G --> O[Error Handler]
    O --> P[Suggestions<br/>Engine]
    O --> Q[Formatted<br/>Output]
    
    Q --> R[Console Output<br/>colored/tabled]
    
    style A fill:#f9f,stroke:#333,stroke-width:4px
    style D fill:#bbf,stroke:#333,stroke-width:2px
    style H fill:#bfb,stroke:#333,stroke-width:2px
    style O fill:#fbb,stroke:#333,stroke-width:2px